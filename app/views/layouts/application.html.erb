<!DOCTYPE html>
<html class="antialiased">
  <head>
    <title><% if content_for?(:page_title) %><%= appname %> | <%= yield(:page_title) %><% else %><%= appname %><% end %></title>
    <% if content_for?(:page_description) %><meta name="description" content="<%= yield(:page_description) %>"/><% end %>
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta charset="UTF-8" />
    <%= csrf_meta_tags %>
    <%= csp_meta_tag %>
    <%= stylesheet_link_tag 'application', media: 'all', 'data-turbolinks-track': 'reload' %>
    <%= stylesheet_pack_tag 'application', media: 'all', 'data-turbolinks-track': 'reload' %>
    <%= javascript_pack_tag 'application', 'data-turbolinks-track': 'reload' %>
  </head>

  <header class="mb-4">
    <nav class="flex flex-wrap items-center justify-between px-3 py-2 bg-gray-300 lg:px-10">
      <div class="flex items-center mr-6 flex-no-shrink">
        <%= link_to appname, root_path, class:"link text-xl tracking-tight font-black" %>
      </div>
      <div class="block lg:hidden">
        <button class="flex items-center px-3 py-2 border border-gray-400 rounded text-grey hover:text-gray-200 hover:border-gray-600">
          <svg class="w-3 h-3 fill-current" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><title>Menu</title><path d="M0 3h20v2H0V3zm0 6h20v2H0V9zm0 6h20v2H0v-2z"/></svg>
        </button>
      </div>
      <div class="items-center block w-full text-center lg:flex-1 lg:flex lg:text-left">
        <div class="lg:flex-grow">
          <% if user_signed_in? %><%= link_to 'welcome', welcome_path, class: "block mt-4 lg:inline-block lg:mt-0 lg:mr-4 mb-2 lg:mb-0 link" %><% end %>
          <%= link_to "about", about_path, class: "block mt-4 lg:inline-block lg:mt-0 lg:mr-4 mb-2 lg:mb-0 link" %>
        </div>
        <div class="items-center block w-full mt-2 text-center lg:flex lg:flex-row lg:flex-1 lg:mt-0 lg:text-left lg:justify-end">
          <% if user_signed_in? %><div class="px-3 py-2"><%= link_to 'edit profile', edit_user_registration_path %></div>
          <% if user_signed_in? && current_user.isadmin? %><div class="px-3 py-2"><%= link_to 'admin', rails_admin_path %></div><% end %>
          <div class="px-3 py-2"><%= link_to 'sign out', destroy_user_session_path, method: 'delete' %></div><% else %><div class="px-3 py-2"><%= link_to 'sign up', new_user_registration_path %></div>
          <div class="px-3 py-2"><%= link_to 'sign in', new_user_session_path %></div><% end %>
        </div>
      </div>
    </nav>
  </header>

  <body class="font-sans font-normal leading-normal text-gray-800 bg-white">
    <% flash.each do |type, message| %>
      <% if type == "alert" %><div class="bg-red-500"><div class="container px-2 py-4 mx-auto font-sans font-medium text-center text-white"><%= message %></div></div><% end %>
      <% if type == "notice" %><div class="bg-green-500"><div class="container px-2 py-4 mx-auto font-sans font-medium text-center text-white"><%= message %></div></div><% end %>
    <% end %>
    <p class="notice"><%= notice %></p>
    <p class="alert"><%= alert %></p>
    <main class="px-4 lg:px-10">
      <%= yield %>
    </main>
  </body>
</html>
